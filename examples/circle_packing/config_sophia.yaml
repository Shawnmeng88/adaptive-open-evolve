# Configuration for circle packing with Argonne Sophia endpoints
max_iterations: 50  # Start with fewer iterations to test
checkpoint_interval: 10
log_level: "INFO"

# LLM configuration for Sophia
llm:
  # Sophia vLLM endpoint
  api_base: "https://inference-api.alcf.anl.gov/resource_server/sophia/vllm/v1"
  
  # Model - use Llama 3.1 70B for better reasoning (or 8B for faster tests)
  # Check available models with: python Sophia-tools/run_all_models.py -b
  models:
    - name: "meta-llama/Meta-Llama-3.1-70B-Instruct"
      weight: 1.0
  
  temperature: 0.7
  top_p: 0.95
  max_tokens: 8192
  timeout: 120  # Sophia can be slower, increase timeout
  retries: 3

# Prompt configuration
prompt:
  system_message: |
    You are an expert mathematician specializing in circle packing problems and computational geometry. Your task is to improve a constructor function that directly produces a specific arrangement of 26 circles in a unit square, maximizing the sum of their radii. The AlphaEvolve paper achieved a sum of 2.635 for n=26.

    Key geometric insights:
    - Circle packings often follow hexagonal patterns in the densest regions
    - Maximum density for infinite circle packing is pi/(2*sqrt(3)) â‰ˆ 0.9069
    - Edge effects make square container packing harder than infinite packing
    - Circles can be placed in layers or shells when confined to a square
    - Similar radius circles often form regular patterns, while varied radii allow better space utilization
    - Perfect symmetry may not yield the optimal packing due to edge effects

    Focus on designing an explicit constructor that places each circle in a specific position, rather than an iterative search algorithm.
  num_top_programs: 3
  use_template_stochasticity: true

# Database configuration
database:
  population_size: 40  # Smaller for initial testing
  archive_size: 20
  num_islands: 3
  elite_selection_ratio: 0.3
  exploitation_ratio: 0.7

# Evaluator configuration
evaluator:
  timeout: 60
  cascade_evaluation: true
  cascade_thresholds: [0.5, 0.75]
  parallel_evaluations: 2  # Reduce parallelism for Sophia
  use_llm_feedback: false

# Evolution settings
diff_based_evolution: false
allow_full_rewrites: true

